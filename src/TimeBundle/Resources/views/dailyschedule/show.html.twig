{% extends 'base.html.twig' %}

{% block body %}
    
    <div class='container'>
    <h1>Today Dailyschedule</h1>

    {% if dailySchedules %}
    
        <div class="card" >
            <h2> </h2>
            <div class="card-block">
              <h4 class="card-title">{{dailySchedules[0].date|date('l')}}</h4>
              <p class="card-text">{{ dailySchedules[0].date|date('Y-m-d') }}</p>
            </div>
            <ul class="list-group list-group-flush">
                {% for dailySchedule in dailySchedules %}
                    <li class="list-group-item">
                         {{ dailySchedule.taskInSchedule.taskName }}
{#                         <pre class='text-right '> {% if dailySchedule.isDone %}Yes{% else %}No{% endif %}</div>#}
                    
                        {% if dailySchedule.isDone %}
                           <div class="date" id="{{dailySchedule.id}}done" >
                            <h6 class="glyphicon glyphicon-ok" aria-hidden="true">Done</h6>
                           </div>
                           <div class="date" style="display:none" id="{{dailySchedule.id}}notDone">
                             <h6 class="fa fa-plus" aria-hidden="true">NotDone</h6>
                           </div>


                         {% else %}
                           <div class="date" style="display:none" id="{{dailySchedule.id}}done">
                             <h6 class="glyphicon glyphicon-ok" aria-hidden="true">Done</h6>
                           </div>
                           <div class="date" id="{{dailySchedule.id}}notDone">
                             <h6 class="fa fa-plus" aria-hidden="true">NotDone</h6>
                           </div>
                         {% endif %}
                    </li>
                    
                    
            <script>
              $(document).ready(function(){
                  $("#{{dailySchedule.id}}done").click(function(){
                      $.ajax({url: "{{ path('dailySchedule_done', {'schedule_id': dailySchedule.id }) }}", success: function(result){
                              console.log(result);
            if (result.status == 1){
                          $("#{{dailySchedule.id}}notDone").show();
                          $("#{{dailySchedule.id}}done").hide();
                        }
                      }
                    });
                  });
                  $("#{{dailySchedule.id}}notDone").click(function(){
                      $.ajax({url: "{{ path('dailySchedule_done', {'schedule_id': dailySchedule.id }) }}", success: function(result){
                        if (!result.status){
                          $("#{{dailySchedule.id}}done").show();
                          $("#{{dailySchedule.id}}notDone").hide();
                        }
                      }
                    });
                  });
              });
            </script>
                {% endfor %}
            </ul>
            <div class="card-block">
              <a class="card-link" href="{{ path('dailySchedule_index',{ 'child_id': child_id }) }}">Back to the list</a>
              
              
            </div>
        </div>
    
    {% endif %}
    
    
    {#<table>
        <thead>
            <tr>
                <th>Id</th>
                <th>Isdone</th>
                <th>Date</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
        {% for dailySchedule in dailySchedules %}
            <tr>
                <td><a href="{{ path('dailyschedule_show', { 'id': dailySchedule.id }) }}">{{ dailySchedule.taskInSchedule.taskName }}</a></td>
                <td>{% if dailySchedule.isDone %}Yes{% else %}No{% endif %}</td>
               
                <td>{% if dailySchedule.date %}
                        {{ dailySchedule.date|date('Y-m-d') }}
                     
                        {{dailySchedule.date|date('l')}}
                        
                    {% endif %}</td>
                
            </tr>
        {% endfor %}
        </tbody>
    </table>#}
   
    </div>
 
    
             
    
{% endblock %}
